var Ee=Object.defineProperty,Ae=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var ge=(e,t,n)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,se=(e,t)=>{for(var n in t||(t={}))Re.call(t,n)&&ge(e,n,t[n]);if(me)for(var n of me(t))Pe.call(t,n)&&ge(e,n,t[n]);return e},_e=(e,t)=>Ae(e,je(t));import{t as O,u as q,v as C,r as $,a6 as re,D as ee,w as r,M as J,N as H,y as u,z as y,A as i,_ as I,C as a,P as j,aK as Te,E as V,a1 as te,R as U,S as ye,aE as ie,W as B,F as M,l as le,a5 as ne,aD as He,Z as be,bt as Fe,H as z,V as $e,aM as he,at as We,I as qe,Y as ze,a7 as h,O as Ge,G as Qe,T as Xe,U as Je,a8 as Ke,a9 as Ye}from"./vendor.ef99adf3.js";import{u as Ze,a as we,_ as E,b as ke,g as Se,c as ue,d as K,e as ce,M as xe,t as et,f as tt,h as nt,i as ot,j as Ie,l as at,k as st,m as rt,n as it,o as Ce,p as Le,q as lt,r as ut,H as ct}from"./index.5bac3394.entry.js";import"./use-sync.7a0e9d8b.js";const dt=O({setup(){const{t:e}=q(),t=Ze(),n=we(),l=C(()=>{var v;return n.settings===null||!((v=n.settings)==null?void 0:v.project_logo)?null:ke(Se()+`assets/${n.settings.project_logo}`)}),d=$(!1),{queueHasItems:c}=re(t);ee(()=>c.value,v=>{v&&(d.value=!0)});const s=C(()=>{var v;return(v=n.settings)==null?void 0:v.project_url}),o=C(()=>{var v;return((v=n.settings)==null?void 0:v.project_url)?e("view_project"):!1});return{customLogoPath:l,showLoader:d,stopSpinnerIfQueueIsEmpty:p,url:s,urlTooltip:o};function p(){c.value===!1&&(d.value=!1)}}}),vt=["src"];function pt(e,t,n,l,d,c){const s=r("v-progress-linear"),o=J("tooltip");return H((u(),y(ye(e.url?"a":"div"),{href:e.url,target:e.url?"_blank":void 0,rel:e.url?"noopener noreferrer":void 0,class:U(["module-bar-logo",{loading:e.showLoader}])},{default:i(()=>[e.customLogoPath?(u(),I(te,{key:0},[a(Te,{name:"fade"},{default:i(()=>[e.showLoader?(u(),y(s,{key:0,indeterminate:"",rounded:"",onAnimationiteration:e.stopSpinnerIfQueueIsEmpty},null,8,["onAnimationiteration"])):j("",!0)]),_:1}),V("img",{class:"custom-logo",src:e.customLogoPath,alt:"Project Logo"},null,8,vt)],64)):(u(),I("div",{key:1,class:U(["logo",{running:e.showLoader}]),onAnimationiteration:t[0]||(t[0]=(...p)=>e.stopSpinnerIfQueueIsEmpty&&e.stopSpinnerIfQueueIsEmpty(...p))},null,34))]),_:1},8,["href","target","rel","class"])),[[o,e.urlTooltip,void 0,{right:!0}]])}var _t=E(dt,[["render",pt],["__scopeId","data-v-a98d38ac"]]);const ft=O({setup(){const{t:e}=q(),t=ue(),n=K(),{notificationsDrawerOpen:l}=ie(t),{unread:d}=ie(n),c=ce(),s=$(!1),o=C(()=>{var k;return!c.currentUser||!("avatar"in c.currentUser)||!((k=c.currentUser)==null?void 0:k.avatar)?null:ke(Se()+`assets/${c.currentUser.avatar.id}?key=system-medium-cover`)}),p=$(null),v=C(()=>{var m;return`/users/${(m=c.currentUser)==null?void 0:m.id}`}),b=C(()=>"/logout"),_=c.fullName;return{t:e,userFullName:_,avatarURL:o,userProfileLink:v,signOutActive:s,signOutLink:b,notificationsDrawerOpen:l,unread:d,avatarError:p}}}),mt={class:"module-bar-avatar"},gt=["src","alt"];function yt(e,t,n,l,d,c){const s=r("v-icon"),o=r("v-button"),p=r("v-badge"),v=r("v-card-title"),b=r("v-card-actions"),_=r("v-card"),k=r("v-dialog"),m=r("v-avatar"),T=r("router-link"),N=r("v-hover"),L=J("tooltip");return u(),I("div",mt,[a(p,{value:e.unread,disabled:e.unread==0,class:"notifications-badge"},{default:i(()=>[H(a(o,{tile:"",icon:"","x-large":"",class:"notifications",onClick:t[0]||(t[0]=R=>e.notificationsDrawerOpen=!0)},{default:i(()=>[a(s,{name:"notifications"})]),_:1},512),[[L,e.t("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),a(N,null,{default:i(({hover:R})=>[a(k,{modelValue:e.signOutActive,"onUpdate:modelValue":t[2]||(t[2]=w=>e.signOutActive=w),onEsc:t[3]||(t[3]=w=>e.signOutActive=!1)},{activator:i(({on:w})=>[H(a(o,{tile:"",icon:"","x-large":"",class:U([{show:R},"sign-out"]),onClick:w},{default:i(()=>[a(s,{name:"logout"})]),_:2},1032,["class","onClick"]),[[L,e.t("sign_out"),void 0,{right:!0}]])]),default:i(()=>[a(_,null,{default:i(()=>[a(v,null,{default:i(()=>[B(M(e.t("sign_out_confirm")),1)]),_:1}),a(b,null,{default:i(()=>[a(o,{secondary:"",onClick:t[1]||(t[1]=w=>e.signOutActive=!e.signOutActive)},{default:i(()=>[B(M(e.t("cancel")),1)]),_:1}),a(o,{to:e.signOutLink},{default:i(()=>[B(M(e.t("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),a(T,{to:e.userProfileLink},{default:i(()=>[H(a(m,{tile:"",large:"",class:U({"no-avatar":!e.avatarURL})},{default:i(()=>[e.avatarURL&&!e.avatarError?(u(),I("img",{key:0,src:e.avatarURL,alt:e.userFullName,class:"avatar-image",onError:t[4]||(t[4]=w=>e.avatarError=w)},null,40,gt)):(u(),y(s,{key:1,name:"account_circle"}))]),_:1},8,["class"]),[[L,e.userFullName,void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}var bt=E(ft,[["render",yt],["__scopeId","data-v-cfc48174"]]);const $t=O({components:{ModuleBarLogo:_t,ModuleBarAvatar:bt},setup(){const e=we(),{modules:t}=tt(),n=C(()=>t.value.map(d=>d.id));return{modules:C(()=>{var d;return e.settings?((d=e.settings.module_bar)!=null?d:xe).filter(c=>c.type==="link"?!0:c.enabled&&n.value.includes(c.id)).map(c=>{if(c.type==="link"){const o=le.exports.omit(c,["url"]);return c.url.startsWith("/")?o.to=c.url:o.href=c.url,et(o)}const s=t.value.find(o=>o.id===c.id);return _e(se(se({},c),t.value.find(o=>o.id===c.id)),{to:`/${s.id}`})}):[]})}}}),ht={class:"module-bar"},wt={class:"modules"};function kt(e,t,n,l,d,c){const s=r("module-bar-logo"),o=r("v-icon"),p=r("v-button"),v=r("module-bar-avatar"),b=J("tooltip");return u(),I("div",ht,[a(s),V("div",wt,[(u(!0),I(te,null,ne(e.modules,_=>H((u(),y(p,{key:_.id,icon:"","x-large":"",to:_.to,href:_.href,tile:"",style:He(_.color?{"--v-button-color-active":_.color}:null)},{default:i(()=>[a(o,{name:_.icon},null,8,["name"])]),_:2},1032,["to","href","style"])),[[b,_.name,void 0,{right:!0}]])),128))]),a(v)])}var St=E($t,[["render",kt],["__scopeId","data-v-fc7a189c"]]);const It=O({setup(){const{t:e}=q(),{parsedInfo:t}=nt(),n=K(),l=ce(),d=C(()=>n.dialogs);return{t:e,notifications:d,admin:l.isAdmin,done:s,getGitHubIssueLink:c};function c(o,p){var b,_,k,m;const v=`<!-- Please put a detailed explanation of the problem here. -->

---

### Project details
Directus Version: ${(b=t.value)==null?void 0:b.directus.version}
Environment: production
OS: ${(_=t.value)==null?void 0:_.os.type} ${(k=t.value)==null?void 0:k.os.version}
Node: ${(m=t.value)==null?void 0:m.node.version}

### Error

Title: ${p.title||"none"}
Message: ${p.text||"none"}

<details>
<summary>Stack Trace</summary>
<pre>
${JSON.stringify(p.error,Object.getOwnPropertyNames(p.error),2)}
</pre>
</details>
			`;return`https://github.com/directus/directus/issues/new?body=${encodeURIComponent(v)}`}function s(o){n.remove(o)}}}),Ct={class:"notification-dialogs"},Lt=["href"];function Vt(e,t,n,l,d,c){const s=r("v-card-title"),o=r("v-error"),p=r("v-card-text"),v=r("v-button"),b=r("v-card-actions"),_=r("v-card"),k=r("v-dialog");return u(),I("div",Ct,[(u(!0),I(te,null,ne(e.notifications,m=>(u(),y(k,{key:m.id,"model-value":!0,persist:""},{default:i(()=>[a(_,{class:U([m.type])},{default:i(()=>[a(s,null,{default:i(()=>[B(M(m.title),1)]),_:2},1024),m.text?(u(),y(p,{key:0},{default:i(()=>[B(M(m.text)+" ",1),m.error?(u(),y(o,{key:0,error:m.error},null,8,["error"])):j("",!0)]),_:2},1024)):j("",!0),a(b,null,{default:i(()=>[m.type==="error"&&e.admin&&m.code==="UNKNOWN"?(u(),y(v,{key:0,secondary:""},{default:i(()=>[V("a",{target:"_blank",href:e.getGitHubIssueLink(m.id,m)},M(e.t("report_error")),9,Lt)]),_:2},1024)):j("",!0),a(v,{onClick:T=>e.done(m.id)},{default:i(()=>[B(M(e.t("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}var Dt=E(It,[["render",Vt],["__scopeId","data-v-bb61b36a"]]);const Mt=O({props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){const{t}=q(),n=ue(),l=ce(),d=K(),c=ot(),s=be(),o=$([]),p=$(0),v=$(!1),b=$(null),_=$([]),k=$(["inbox"]),{notificationsDrawerOpen:m}=ie(n),T=$([{text:t("subject"),value:"subject",sortable:!1,width:300,align:"left"},{text:t("timestamp"),value:"timestampDistance",sortable:!1,width:180,align:"left"}]);return N(),ee([()=>e.modelValue,k],()=>N()),{tableHeaders:T,t,notificationsDrawerOpen:m,page:p,notifications:o,loading:v,error:b,selection:_,onRowClick:R,toggleArchive:L,tab:k};async function N(){v.value=!0;try{const w=await Ie.get("/notifications",{params:{filter:{_and:[{recipient:{_eq:l.currentUser.id}},{status:{_eq:k.value[0]}}]},fields:["id","subject","collection","item","timestamp"],sort:["-timestamp"]}});await d.getUnreadCount();const F=w.data.data,W=[];for(const Q of F)W.push(_e(se({},Q),{timestampDistance:await at(Fe(Q.timestamp),new Date,{addSuffix:!0})}));o.value=W}catch(w){b.value=w}finally{v.value=!1}}async function L(){await Ie.patch("/notifications",{keys:_.value.map(({id:w})=>w),data:{status:k.value[0]==="inbox"?"archived":"inbox"}}),await N(),_.value=[]}function R({item:w}){var W;const F=c.getCollection(w.collection);((W=F==null?void 0:F.meta)==null?void 0:W.singleton)?s.push(`/content/${w.collection}`):s.push(`/content/${w.collection}/${w.item}`),m.value=!1}}});function Nt(e,t,n,l,d,c){const s=r("v-icon"),o=r("v-button"),p=r("v-list-item-icon"),v=r("v-list-item-content"),b=r("v-tab"),_=r("v-tabs"),k=r("v-info"),m=r("v-table"),T=r("v-drawer"),N=J("tooltip");return u(),y(T,{modelValue:e.notificationsDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=L=>e.notificationsDrawerOpen=L),icon:"notifications",title:e.t("notifications"),onCancel:t[4]||(t[4]=L=>e.notificationsDrawerOpen=!1)},{actions:i(()=>[H(a(o,{icon:"",rounded:"",disabled:e.selection.length===0,secondary:"",onClick:e.toggleArchive},{default:i(()=>[a(s,{name:e.tab[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled","onClick"]),[[N,e.tab[0]==="inbox"?e.t("archive"):e.t("unarchive"),void 0,{bottom:!0}]])]),sidebar:i(()=>[a(_,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=L=>e.tab=L),vertical:""},{default:i(()=>[a(b,{value:"inbox"},{default:i(()=>[a(p,null,{default:i(()=>[a(s,{name:"inbox"})]),_:1}),a(v,null,{default:i(()=>[B(M(e.t("inbox")),1)]),_:1})]),_:1}),a(b,{value:"archived"},{default:i(()=>[a(p,null,{default:i(()=>[a(s,{name:"archive"})]),_:1}),a(v,null,{default:i(()=>[B(M(e.t("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:i(()=>[!e.loading&&e.notifications.length===0?(u(),y(k,{key:0,icon:"notifications",title:e.t("no_notifications"),center:""},{default:i(()=>[B(M(e.t("no_notifications_copy")),1)]),_:1},8,["title"])):(u(),y(m,{key:1,modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=L=>e.selection=L),headers:e.tableHeaders,"onUpdate:headers":t[2]||(t[2]=L=>e.tableHeaders=L),"show-select":"",loading:e.loading,items:e.notifications,"item-key":"id","onClick:row":e.onRowClick},null,8,["modelValue","headers","loading","items","onClick:row"]))]),_:1},8,["modelValue","title"])}var Ot=E(Mt,[["render",Nt],["__scopeId","data-v-2e8d7f71"]]);const Ut=O({props:{id:{type:String,required:!0},title:{type:String,required:!0},text:{type:String,default:null},icon:{type:String,default:null},type:{type:String,default:"info",validator:e=>["info","success","warning","error"].includes(e)},tail:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},progress:{type:Number,default:void 0}},setup(e){const t=K();return{close:n};function n(){e.showClose===!0&&t.remove(e.id)}}}),Bt={key:0,class:"icon"},Et={class:"content"},At={class:"title selectable"},jt={key:0,class:"text selectable"};function Rt(e,t,n,l,d,c){const s=r("v-progress-circular"),o=r("v-icon");return u(),I("div",{class:U(["notification-item",[e.type,{tail:e.tail,dense:e.dense}]]),onClick:t[0]||(t[0]=(...p)=>e.close&&e.close(...p))},[e.loading||e.progress||e.icon?(u(),I("div",Bt,[e.loading?(u(),y(s,{key:0,indeterminate:"",small:""})):e.progress?(u(),y(s,{key:1,small:"",value:e.progress},null,8,["value"])):(u(),y(o,{key:2,name:e.icon},null,8,["name"]))])):j("",!0),V("div",Et,[V("p",At,M(e.title),1),e.text?(u(),I("p",jt,M(e.text),1)):j("",!0)]),e.showClose?(u(),y(o,{key:1,name:"close",clickable:"",class:"close",onClick:e.close},null,8,["onClick"])):j("",!0)],2)}var Ve=E(Ut,[["render",Rt],["__scopeId","data-v-43553e80"]]);const Pt=O({components:{NotificationItem:Ve},props:{sidebarOpen:{type:Boolean,default:!1}},setup(){const e=K();return{queue:re(e).queue}}});function Tt(e,t,n,l,d,c){const s=r("notification-item");return u(),y(he,{class:U(["notifications-group",{"sidebar-open":e.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:i(()=>[z(e.$slots,"default",{},void 0,!0),(u(!0),I(te,null,ne(e.queue,(o,p)=>(u(),y(s,$e({key:o.id},o,{tail:p===e.queue.length-1,dense:e.sidebarOpen===!1,"show-close":o.persist===!0&&o.closeable!==!1}),null,16,["tail","dense","show-close"]))),128))]),_:3},8,["class"])}var Ht=E(Pt,[["render",Tt],["__scopeId","data-v-509bd4b0"]]);const Ft=O({props:{to:{type:String,default:null},icon:{type:String,default:"box"},active:{type:Boolean,default:!1}},emits:["click"],setup(){const e=ue(),{sidebarOpen:t}=re(e);return{sidebarOpen:t}}}),Wt={class:"icon"},qt={key:0,class:"title"};function zt(e,t,n,l,d,c){const s=r("v-icon");return u(),y(ye(e.to?"router-link":"button"),{class:U(["sidebar-button",{active:e.active}]),onClick:t[0]||(t[0]=o=>e.$emit("click",o))},{default:i(()=>[V("div",Wt,[a(s,{name:e.icon},null,8,["name"])]),e.sidebarOpen?(u(),I("div",qt,[z(e.$slots,"default",{},void 0,!0)])):j("",!0)]),_:3},8,["class"])}var Gt=E(Ft,[["render",zt],["__scopeId","data-v-a8c828a4"]]);const Qt=O({components:{SidebarButton:Gt,NotificationItem:Ve},props:{sidebarOpen:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(){const{t:e}=q(),t=K();return{t:e,lastFour:t.lastFour}}}),Xt={class:"notifications-preview"},Jt={key:0,class:"inline"},Kt={class:"padding-box"};function Yt(e,t,n,l,d,c){const s=r("router-link"),o=r("notification-item"),p=r("transition-expand"),v=r("sidebar-button"),b=J("tooltip");return u(),I("div",Xt,[a(p,{tag:"div"},{default:i(()=>[e.modelValue?(u(),I("div",Jt,[V("div",Kt,[a(s,{class:U(["link",{"has-items":e.lastFour.length>0}]),to:"/activity"},{default:i(()=>[B(M(e.t("show_all_activity")),1)]),_:1},8,["class"]),a(he,{tag:"div",name:"notification",class:"transition"},{default:i(()=>[(u(!0),I(te,null,ne(e.lastFour,_=>(u(),y(o,$e({key:_.id},_),null,16))),128))]),_:1})])])):j("",!0)]),_:1}),H(a(v,{active:e.modelValue,class:"toggle",icon:"pending_actions",onClick:t[0]||(t[0]=_=>e.$emit("update:modelValue",!e.modelValue))},{default:i(()=>[B(M(e.t("activity_log")),1)]),_:1},8,["active"]),[[b,e.t("activity_log"),void 0,{left:!0}]])])}var Zt=E(Qt,[["render",Yt],["__scopeId","data-v-415ab206"]]),Y=1e3,Z=Y*60,x=Z*60,G=x*24,xt=G*7,en=G*365.25,de=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return tn(e);if(n==="number"&&isFinite(e))return t.long?on(e):nn(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function tn(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var n=parseFloat(t[1]),l=(t[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return n*en;case"weeks":case"week":case"w":return n*xt;case"days":case"day":case"d":return n*G;case"hours":case"hour":case"hrs":case"hr":case"h":return n*x;case"minutes":case"minute":case"mins":case"min":case"m":return n*Z;case"seconds":case"second":case"secs":case"sec":case"s":return n*Y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function nn(e){var t=Math.abs(e);return t>=G?Math.round(e/G)+"d":t>=x?Math.round(e/x)+"h":t>=Z?Math.round(e/Z)+"m":t>=Y?Math.round(e/Y)+"s":e+"ms"}function on(e){var t=Math.abs(e);return t>=G?ve(e,t,G,"day"):t>=x?ve(e,t,x,"hour"):t>=Z?ve(e,t,Z,"minute"):t>=Y?ve(e,t,Y,"second"):e+" ms"}function ve(e,t,n,l){var d=t>=n*1.5;return Math.round(e/n)+" "+l+(d?"s":"")}const an=O({setup(){const{t:e}=q(),t=st(),n=C(()=>{const o=le.exports.sortBy(t.latency,["timestamp"]);return o[o.length-1]}),l=C(()=>{if(!t.latency||t.latency.length===0)return 0;const o=le.exports.sortBy(t.latency,["timestamp"]),p=o.slice(Math.max(o.length-5,0));let v=0;for(const{latency:b}of p)v+=b;return Math.round(v/p.length)}),d=C(()=>l.value<=250?4:l.value>250&&l.value<=500?3:l.value>500&&l.value<=750?2:1),c=C(()=>{switch(d.value){case 4:return`${e("connection_excellent")}
(${de(l.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${de(l.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${de(l.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${de(l.value)} ${e("latency")})`;default:return null}});return{icon:C(()=>{switch(d.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}}),lastLatency:n,latencyTooltip:c}}}),sn={class:"latency-indicator"};function rn(e,t,n,l,d,c){const s=r("v-progress-circular"),o=r("v-icon"),p=J("tooltip");return H((u(),I("div",sn,[e.lastLatency?(u(),y(o,{key:1,name:e.icon},null,8,["name"])):(u(),y(s,{key:0,indeterminate:""}))],512)),[[p,e.latencyTooltip,void 0,{bottom:!0,end:!0}]])}var ln=E(an,[["render",rn],["__scopeId","data-v-2cfd5c8b"]]);const un=O({components:{LatencyIndicator:ln},setup(){const e=rt(),t=C(()=>{var l,d;return(d=(l=e.info)==null?void 0:l.project)==null?void 0:d.project_name}),n=C(()=>{var l,d;return(d=(l=e.info)==null?void 0:l.project)==null?void 0:d.project_descriptor});return{name:t,descriptor:n}}}),cn={class:"project-info"},dn={class:"name-container"};function vn(e,t,n,l,d,c){const s=r("latency-indicator"),o=r("v-text-overflow");return u(),I("div",cn,[a(s),V("div",dn,[a(o,{placement:"right",class:"name",text:e.name},null,8,["text"]),e.descriptor?(u(),y(o,{key:0,placement:"right",class:"descriptor",text:e.descriptor},null,8,["text"])):j("",!0)])])}var pn=E(un,[["render",vn],["__scopeId","data-v-47e3c683"]]);const _n=O({props:{sidebarOpen:{type:Boolean,default:!1}},setup(e){const t=$([]),n=$(!1);return ee(()=>e.sidebarOpen,async l=>{l===!1?t.value=[]:(n.value=!0,await We(),n.value=!1)}),{openDetail:t,mandatory:n}}});function fn(e,t,n,l,d,c){const s=r("v-item-group");return u(),y(s,{modelValue:e.openDetail,"onUpdate:modelValue":t[0]||(t[0]=o=>e.openDetail=o),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:e.mandatory},{default:i(()=>[z(e.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}var mn=E(_n,[["render",fn],["__scopeId","data-v-ebb6371e"]]);const gn=e=>(Ke("data-v-d547d406"),e=e(),Ye(),e),yn={class:"module-nav-content"},bn={class:"flex-container"},$n=gn(()=>V("div",{class:"spacer"},null,-1)),hn=O({props:{title:{default:null},smallHeader:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=q(),l=be(),d=$(),c=$(),{width:s}=it(),{width:o}=Ce(d),{width:p}=Ce(c),v=$(),{handleHover:b,onResizeHandlePointerDown:_,resetModuleNavWidth:k,onPointerMove:m,onPointerUp:T}=Me();Le(window,"pointermove",m),Le(window,"pointerup",T);const{data:N}=lt("module-nav-width");qe(()=>{!N.value||Number.isNaN(N.value)||(v.value.style.width=`${N.value}px`)});const{title:L}=re(t),R=$(!1),w=ce(),F=ue(),W=C(()=>{var S,g;return w.currentUser?((g=(S=w.currentUser)==null?void 0:S.role)==null?void 0:g.app_access)||!1:!0}),Q=$(!1),{sidebarOpen:P,fullScreen:fe}=ie(F),De=C(()=>{var S;return((S=w.currentUser)==null?void 0:S.theme)||"auto"});ze("main-element",d),l.afterEach(async()=>{var S;(S=d.value)==null||S.scrollTo({top:0}),fe.value=!1}),ut(L);function Me(){const S=$(!1),g=$(!1),oe=$(0),ae=$(0),D=$(null),f=$(0),A=$(null);return ee(D,le.exports.debounce(X=>{X===220?N.value=null:N.value=X},300)),ee([s,o,p],()=>{s.value>1260?f.value=s.value-(590+60+p.value):s.value>960?f.value=s.value-(590+60+60):f.value=s.value-(60+60),D.value&&D.value>f.value&&(D.value=Math.max(220,f.value),v.value.style.width=`${D.value}px`)},{immediate:!0}),{handleHover:S,onResizeHandlePointerDown:pe,resetModuleNavWidth:Oe,onPointerMove:Ue,onPointerUp:Be};function pe(X){g.value=!0,oe.value=X.pageX,ae.value=v.value.offsetWidth}function Oe(){D.value=220,v.value.style.width="220px"}function Ue(X){!g.value||(A.value=window.requestAnimationFrame(()=>{D.value=Math.max(220,ae.value+(X.pageX-oe.value)),D.value>=f.value&&(D.value=f.value),D.value>220&&D.value<=230&&(D.value=220),v.value.style.width=`${D.value}px`}))}function Be(){g.value===!0&&(g.value=!1,A.value&&window.cancelAnimationFrame(A.value))}}function Ne(S){S.target&&S.target.classList.contains("close")===!1&&(P.value=!0)}return(S,g)=>{const oe=r("v-button"),ae=r("v-info"),D=r("v-overlay");return h(W)===!1?(u(),y(ae,{key:0,center:"",title:h(n)("no_app_access"),type:"danger",icon:"block"},{append:i(()=>[a(oe,{to:"/logout"},{default:i(()=>[B(M(h(n)("switch_user")),1)]),_:1})]),default:i(()=>[B(M(h(n)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(u(),I("div",{key:1,class:U(["private-view",{theme:h(De),"full-screen":h(fe)}])},[V("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:U({"is-open":R.value})},[a(St),V("div",{ref:(f,A)=>{A.moduleNavEl=f,v.value=f},class:"module-nav alt-colors"},[a(h(pn)),V("div",yn,[z(S.$slots,"navigation",{},void 0,!0)]),V("div",{class:U(["module-nav-resize-handle",{active:h(b)}]),onPointerenter:g[0]||(g[0]=f=>b.value=!0),onPointerleave:g[1]||(g[1]=f=>b.value=!1),onPointerdown:g[2]||(g[2]=Ge((...f)=>h(_)&&h(_)(...f),["self"])),onDblclick:g[3]||(g[3]=(...f)=>h(k)&&h(k)(...f))},null,34)],512)],2),V("div",{id:"main-content",ref:(f,A)=>{A.contentEl=f,d.value=f},class:"content"},[a(h(ct),{small:e.smallHeader,"show-sidebar-toggle":"",title:h(L),"onToggle:sidebar":g[4]||(g[4]=f=>P.value=!h(P)),onPrimary:g[5]||(g[5]=f=>R.value=!R.value)},Qe({_:2},[ne(S.$slots,(f,A)=>({name:A,fn:i(pe=>[z(S.$slots,A,Xe(Je(pe)),void 0,!0)])}))]),1032,["small","title"]),V("main",null,[z(S.$slots,"default",{},void 0,!0)])],512),V("aside",{id:"sidebar",ref:(f,A)=>{A.sidebarEl=f,c.value=f},role:"contentinfo",class:U(["alt-colors",{"is-open":h(P)}]),"aria-label":"Module Sidebar",onClick:Ne},[V("div",bn,[a(h(mn),{"sidebar-open":h(P)},{default:i(()=>[z(S.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),$n,a(h(Zt),{modelValue:Q.value,"onUpdate:modelValue":g[6]||(g[6]=f=>Q.value=f),"sidebar-open":h(P)},null,8,["modelValue","sidebar-open"])])],2),a(D,{class:"nav-overlay",active:R.value,onClick:g[7]||(g[7]=f=>R.value=!1)},null,8,["active"]),a(D,{class:"sidebar-overlay",active:h(P),onClick:g[8]||(g[8]=f=>P.value=!1)},null,8,["active"]),a(Ot),Q.value===!1?(u(),y(h(Ht),{key:0,"sidebar-open":h(P)},null,8,["sidebar-open"])):j("",!0),a(h(Dt))],2))}}});var Cn=E(hn,[["__scopeId","data-v-d547d406"]]);export{Cn as PrivateView,Cn as default};
